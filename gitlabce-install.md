# Links
https://about.gitlab.com/install/#ubuntu
http://kottas.hatenablog.com/entry/2019/03/29/000000
https://linuxize.com/post/how-to-change-hostname-on-ubuntu-18-04/

# Env
Ubuntu 18.04
VMware vSphere 6.7 (VMware ESXi, 6.7.0, 13006603)
DNS (dnsmasq: Exnternal)

# Procedure
## Install Ubuntu 18.04
Set Static IP address 
## Set Hostname
FQDN hostname
```
hostnamectl set-hostname <hostname>
sudo vim /etc/cloud/cloud.cfg
#preserve_hostname: true
```

## Set Hostname in dns record


## Linux Common Settings
```
ssh key authentication
apt-get install vim tree tmux
apt-get update
apt-get upgrade
```
## GitLab dependency packages
```
sudo apt-get install -y curl openssh-server ca-certificates
```
#postfix ?

## Add GitLab repository
`curl -LO https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh`  
#modify script_deb.sh line 135 if your server is under proxy
```
Before
curl -sSf "${apt_config_url}" > $apt_source_path
After
  curl -x http://<proxy-server-ip>:<port> --insecure "${apt_config_url}" > $apt_source_path
```
## Install gitlabce
#modify 
#use http:// if you use self signed certificate
sudo EXTERNAL_URL="http://<your-gitlab-server>" apt-get install gitlab-ce
  
  
# memo
$ cat /etc/apt/sources.list.d/gitlab_gitlab-ce.list
# this file was generated by packages.gitlab.com for
# the repository at https://packages.gitlab.com/gitlab/gitlab-ce

deb https://packages.gitlab.com/gitlab/gitlab-ce/ubuntu/ bionic main
deb-src https://packages.gitlab.com/gitlab/gitlab-ce/ubuntu/ bionic main

